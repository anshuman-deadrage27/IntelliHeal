<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>IntelliHeal — FPGA Self-Healing Simulator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/ui/styles.css" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="header-left">
      <h1>IntelliHeal</h1>
      <div class="subtitle">FPGA Self-Healing Simulator — Demo UI</div>
    </div>
    <div class="header-right">
      <div class="small-note">Status: <span id="conn-status">disconnected</span></div>
    </div>
  </header>

  <main class="layout">
    <!-- Board -->
    <section class="panel board-panel" id="board-section">
      <h2>Board Diagram</h2>
      <div id="board-wrapper" class="board-wrapper">
        <object id="board-object" type="image/svg+xml" data="/ui/assets/board.svg" width="100%" height="520"></object>
      </div>
      <div class="board-footer">
        <small>Click a component on the diagram to select it.</small>
      </div>
    </section>

    <!-- Controls & Info -->
    <aside class="panel right-panel" id="controls-section">
      <div class="controls-card">
        <h3>Controls</h3>

        <label class="row">
          <span class="label">Component</span>
          <select id="component-select" class="full"></select>
        </label>

        <div class="row two-cols">
          <label>
            <span class="label">Fault Type</span>
            <select id="fault-select">
              <option value="missing_heartbeat">Missing Heartbeat</option>
              <option value="stuck_logic">Stuck Logic</option>
              <option value="broken_connection">Broken Connection</option>
              <option value="overtemp">Over Temperature</option>
            </select>
          </label>
          <label>
            <span class="label">Severity</span>
            <select id="severity-select">
              <option value="minor">Minor</option>
              <option value="major">Major</option>
              <option value="critical">Critical</option>
            </select>
          </label>
        </div>

        <div class="row">
          <button id="inject-fault-btn" class="primary-btn">Inject Fault</button>
        </div>

        <div class="row scenario-row">
          <button class="scenario-btn" data-scenario="power_fail">Power Fail</button>
          <button class="scenario-btn" data-scenario="thermal_spike">Thermal Spike</button>
          <button class="scenario-btn" data-scenario="logic_stuck">Logic Fault</button>
        </div>

        <hr/>

        <div class="row">
          <label><input type="checkbox" id="slow-checkbox"> Slow Mode</label>
          <label class="inline-range">Speed:
            <input type="range" id="slow-speed" min="50" max="2000" step="10" value="500">
            <span id="speed-val">500ms</span>
          </label>
        </div>
      </div>

      <div class="charts-card">
        <h3>Telemetry</h3>
        <div class="charts-grid">
          <canvas class="chart-canvas" data-chart-for="ADC_FRONTEND" width="320" height="140"></canvas>
          <canvas class="chart-canvas" data-chart-for="FFT" width="320" height="140"></canvas>
          <canvas class="chart-canvas" data-chart-for="FILTER" width="320" height="140"></canvas>
          <canvas class="chart-canvas" data-chart-for="DETECT" width="320" height="140"></canvas>
        </div>
      </div>

      <div class="process-card">
        <h3>Process Status</h3>
        <div id="proc-status">No active process</div>
        <div id="proc-progress-container"><div id="proc-progress"></div></div>
      </div>

      <div class="log-card">
        <h3>Activity Log</h3>
        <div id="log-panel" class="log-panel" aria-live="polite"></div>
      </div>
    </aside>
  </main>

  <script src="/ui/app.js"></script>
</body>
</html>
